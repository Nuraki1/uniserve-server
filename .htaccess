###############################################################################
# Apache .htaccess for the Express API server (cPanel/Apache Passenger)
#
# Put this file in the DOCUMENT ROOT of your API domain/subdomain
# (example: `uniserveapi.etcodex.com`).
#
# This is for the backend API, NOT the SPA client. Do not rewrite to index.html.
###############################################################################

<IfModule mod_passenger.c>
  PassengerEnabled on
  PassengerAppType node

  # If you are using cPanel "Setup Node.js App", it will usually create the
  # correct PassengerAppRoot/PassengerNodejs for you. If not, uncomment and set:
  #
  # PassengerAppRoot /home/<cpanel-user>/path/to/uniserve-server/server
  # PassengerNodejs /home/<cpanel-user>/nodevenv/<appname>/<nodever>/bin/node
  #
  # IMPORTANT: PassengerAppRoot must be ABSOLUTE.
  #PassengerAppRoot /ABSOLUTE/PATH/TO/uniserve-server/server

  # Start the compiled server
  PassengerStartupFile dist/index.js

  PassengerEnvVar NODE_ENV production
</IfModule>

# Basic hardening
Options -Indexes

###############################################################################
# Notes
#
# - After deploying, verify these work:
#   - `GET /health`  -> should return 200 JSON: { ok: true }
#   - `GET /api/branches` (should NOT be 404 from Apache)
#
# - If `/health` is 404, Apache is NOT running the Node app; fix Passenger/cPanel
#   configuration (app root/startup file) or domain document root.
###############################################################################


